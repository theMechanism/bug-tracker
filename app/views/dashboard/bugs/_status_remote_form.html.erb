<% if bug.status == 'Open' %>
  
  <% if claimed_by_current_admin(bug) %>
    <%= simple_form_for bug, url: dashboard_bug_path(bug), remote: true do |f| %>
        
      <%= f.input :status, as: :hidden, :input_html => { :value => "Verify" } %>
      
      <%= f.button :submit, "Submit for review" %>
    <% end %>

  <% else %>
    Claim this bug to submit for review.
  <% end %>

  

<% elsif bug.status == 'Verify' %>

  <% if current_admin_is_project_manager(bug)  %>

    <%= simple_form_for bug, url: dashboard_bug_path(bug), remote: true do |f| %>
      
      <%= f.input :status, collection: ['Open', 'Closed'], include_blank: false, label_method: lambda { |value| value == 'Open' ? 'Reopen' : 'Close' } %>
      
      <%= f.button :submit %>
    <% end %>

  <% else %>
    Awaiting review by Project Manager
  <% end %>

<% else %>
  

    <%= simple_form_for bug, url: dashboard_bug_path(bug), remote: true do |f| %>
      
      <%= f.input :status, as: :hidden, :input_html => { :value => "Open" } %>
    
      <%= f.button :submit, "Reopen Bug" %>
    <% end %>
  

<% end %>
    
